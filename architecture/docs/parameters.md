Ansible parameter list
======================

Global parameters
-----------------

Variable | Default value |Description
---------|---------------|--------------
drupal_project_name | test | Project name, initialised with composer create-project
drupal_delivery_path | /var/www/{{ drupal_project_name }} | Project delivery path (only for delivered environment)
drupal_project_path | {{ drupal_delivery_path }} | Project sources path on the remote host
drupal_source_path | {{ drupal_project_path }} | Drupal sources path on the remote host
drupal_hostname | www.{{ drupal_project_name }}.com | Drupal principal hostname
drupal_project_user | smile | Delivery user on the remote host
drupal_project_group | root | Delivery group on the remote host
drupal_webserver_user | www-data | Apache user
drupal_webserver_group | www-data | Apache group
drupal_mode | production | Drupal mode (developer/production/default)
drupal_profiler | Off | Enable the Drupal profiler
drupal_profiler_type | html | Profileur type (html/csv)
drupal_php_display_errors | Off | Variable for PHP display_errors parameter
drupal_php_error_reporting | E_ALL | Variable for PHP error_reporting parameter
drupal_admin_firstname | {{ drupal_project_name }} | Drupal admin user firstname
drupal_admin_lastname | {{ drupal_project_name }} | Drupal admin user lastname
drupal_admin_email | {{ drupal_project_name }}@smile.fr | Drupal admin user email
drupal_admin_user | admin |  Drupal admin user login
drupal_admin_password | magent0 |  Drupal admin user password
drupal_backend_frontname | admin |  Drupal backend frontname in URL
drupal_db_host | mydb | Drupal database hostname
drupal_db_name | {{ drupal_project_name }} | Drupal database name
drupal_db_table_prefix | | Drupal database table prefix
drupal_db_user | {{ drupal_project_name }} | Drupal database user
drupal_db_password | {{ drupal_project_name }} | Drupal database password
drupal_install_date | | Drupal installation date __to be provided after Drupal install__
drupal_crypt_key | | Drupal installation cript key __to be provided after Drupal install__
drupal_use_rewrites | | Drupal installation parameter --use-rewrites
drupal_currency | USD | Drupal installation parameter --currency
drupal_language | en_US | Drupal installation parameter --language
drupal_timezone | Europe/Paris | Drupal installation parameter --timezone
drupal_cronjob | {{ drupal_source_path }}/bin/drupal cron:run >> {{ drupal_source_path }}/var/log/drupal.cron.log | The line that will be added to the crontab
drupal_php_mode | fpm | Used php mode : apache2 or fpm
drupal_cache_id_prefix | {{ drupal_project_name }}_ | Drupal prefix cache id
drupal_cache_host | myredis | Host for Drupal internal cache (Redis by default)
drupal_cache_port | 6379 | Port for Drupal internal cache
drupal_cache_database | 1 | Redis Database number for Drupal internal cache
drupal_cache_session_host | myredis | Host for Drupal session storage (redis)
drupal_cache_session_port | 6380 | Port for Drupal session storage (redis)
drupal_cache_session_database | 1 | Database number for Drupal session storage (redis)
drupal_http_cache_hosts | *following parameters* | List of proxy cache servers
drupal_http_cache_hosts.hosts | myfront1 | Proxy cache host (Varnish by default)
drupal_http_cache_hosts.port | 80 | Proxy cache port
drupal_deploy_di_logs_path | /tmp/drupal_deploy_di.log | Path for di generation logs
drupal_deploy_static_content_logs_path | /tmp/drupal_deploy_static_content.log | Path for static content generation logs
drupal_maintenance_allowed_ips | [] | Allowed IP to access Drupal during maintenance
drupal_install_grunt | false | Install grunt for devs (only on lxc)
drupal_install_maildev | false | Install maildev, accessible on http://xxxx.lxc:1080/
delivery_authorized_smile_users | initial user | List of available smile users for deploy
delivery_authorized_users | delivery_authorized_smile_users | List of available users for deploy
delivery_authorized_extra_keys | empty | List of available extra keys for deploy
deploy_release_path | ../build/dist/smile-sa-d8-project-skeleton-{{ deploy_version }}.tar.gz | Package name generated by spbuilder, __to be provided after modifying composer.json project name__
deploy_shared_folders | - var<br/>  - pub/static<br/>  - pub/media<br/>  | Deployment shared folders
deploy_shared_files | app/etc/config.php | Deployment shared files
deploy_languages | en_US | For Drupal static content generation
deploy_keep_releases | 3 | Release number to keep on delivery
specific_hosts | [myfront1,mydb,myredis] | Aliases to add in /etc/hosts if not defined. __WARNING:__ These aliases need to be added manually on the preproduction and production environments
varnish_basic_auth | | basic auth to use in the varnish vcl file for preprod and prod envs
nginx_vhosts_ssl_certificate_key_file | /etc/ssl/private/ssl-cert-snakeoil.key | ssl certificate to use. must be overridden for prod env
nginx_vhosts_ssl_certificate_file | /etc/ssl/certs/ssl-cert-snakeoil.pem | ssl certificate to use. must be overridden for prod env

Default values for LXC
----------------------

Variable | Default value
---------|--------------
drupal_hostname | {{ drupal_project_name }}.lxc
drupal_mode | developer
drupal_profiler | On
drupal_profiler_type | html
drupal_php_display_errors | On
drupal_install_grunt | true
drupal_install_maildev | true

Default values for Inte
-----------------------

Variable | Default value
---------|--------------
drupal_hostname | drupal.idf.intranet
drupal_project_path | {{ drupal_delivery_path }}/current
drupal_source_path | {{ drupal_project_path }}
drupal_mode | developer
drupal_php_display_errors | On
drupal_install_maildev | true
delivery_authorized_users | delivery_authorized_smile_users + jenkins

Default values for Staging
-----------------------

Variable | Default value
---------|--------------
drupal_hostname | staging.{{ drupal_project_name }}.com
drupal_project_path | {{ drupal_delivery_path }}/current
drupal_source_path | {{ drupal_project_path }}
drupal_mode | production

Default values for Preprod
--------------------------

Variable | Default value
---------|--------------
drupal_hostname | preprod.{{ drupal_project_name }}.com
drupal_project_path | {{ drupal_delivery_path }}/current
drupal_source_path | {{ drupal_project_path }}
drupal_mode | production
varnish_memory_mb | 256


Default values for Prod
-----------------------

Variable | Default value
---------|--------------
drupal_hostname | wwww.{{ drupal_project_name }}.com
drupal_project_path | {{ drupal_delivery_path }}/current
drupal_source_path | {{ drupal_project_path }}
drupal_mode | production
specific_hosts | myfront2 added
varnish_memory_mb | 256
drupal_http_cache_hosts | myfront1:80 & myfront2:80

System parameters
-----------------

See the associated ansible roles :
 + [ansible-basicserver|/ansible/ansible-basicserver]
 + [ansible-apache|/ansible/ansible-apache]
 + [ansible-php|/ansible/ansible-php]
 + [ansible-mysql-server|/ansible/ansible-mysql-server]
 + [ansible-redis|/ansible/ansible-redis]
 + [ansible-varnish|/ansible/ansible-varnish]
